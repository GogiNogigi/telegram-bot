# Настройка режима постоянной работы (Always On)

Эта инструкция поможет настроить проект так, чтобы он работал постоянно, даже при закрытых вкладках браузера Replit.

## Подготовка проекта

1. В проекте уже созданы все необходимые файлы для работы в режиме постоянной работы:
   - `always_on.py` - скрипт, управляющий запуском и мониторингом всех компонентов
   - `entrypoint.sh` - скрипт для запуска в режиме deployment
   - `Procfile` - файл конфигурации для платформ развертывания

2. Скрипт `always_on.py` запускает:
   - Веб-интерфейс администратора (Flask)
   - Telegram бота
   - Мониторинг процессов с автоматическим перезапуском

## Тестирование локально

Перед настройкой постоянной работы рекомендуется проверить, что скрипт работает корректно:

1. Запустите скрипт командой:
   ```
   python always_on.py
   ```

2. Убедитесь, что веб-интерфейс и Telegram бот запускаются без ошибок
3. Проверьте доступность веб-интерфейса, открыв его в браузере
4. Проверьте работу Telegram бота, отправив ему команду `/start`

## Настройка Deployment в Replit

Для постоянной работы проекта нужно настроить Deployment в Replit:

1. В проекте Replit перейдите на вкладку ▶️ (Run)
2. Выберите option "Deploy" на правой панели
3. Нажмите кнопку "Deploy" для первичного развертывания проекта

## Настройка "Always On"

После успешного деплоя настройте функцию "Always On":

1. В проекте Replit нажмите на иконку ⚙️ (Settings) в левой панели
2. Выберите раздел "Deployment"
3. Найдите опцию "Always On" и активируйте её (переключите тумблер в положение ON)

## Проверка работы

После настройки "Always On":

1. Закройте все вкладки с проектом Replit
2. Подождите несколько минут
3. Откройте проект снова и убедитесь, что:
   - Веб-интерфейс доступен
   - Telegram бот отвечает на команды
   - Логи показывают непрерывную работу

## Решение проблем

Если что-то не работает:

1. Проверьте логи в файле `always_on.log`
2. Убедитесь, что скрипты имеют права на выполнение (`chmod +x always_on.py entrypoint.sh`)
3. Проверьте, что Telegram токен настроен правильно
4. Перезапустите deployment в интерфейсе Replit

## Внесение изменений

После внесения изменений в код:

1. Протестируйте изменения локально
2. Сделайте новый deployment через интерфейс Replit
3. Убедитесь, что новая версия запущена и работает корректно