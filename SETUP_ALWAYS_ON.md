# Настройка Always On для бота и веб-интерфейса

## Важная информация о Always On в Replit

Always On в Replit - это функция, которая позволяет приложению работать постоянно, даже когда вкладка браузера закрыта. Это платная функция, требующая Premium подписки или достаточного количества Cycles.

⚠️ **Внимание!** Настройка корректной работы в режиме Always On требует специальной конфигурации, которая уже реализована в текущей версии проекта.

## Инструкция по включению Always On (Обновленная)

1. **Правильная установка проекта**
   - В проекте теперь установлен специальный контроллер для работы в режиме Always On
   - Он автоматически управляет запуском и перезапуском всех компонентов системы

2. **Процесс деплоя и активации**
   - Нажмите кнопку "Deploy" (Развернуть) в правом верхнем углу Replit
   - Выберите "Deploy to Replit"
   - После успешного деплоя, перейдите на страницу развернутого приложения
   - Найдите опцию "Always On" и включите ее
   - Убедитесь, что индикатор Always On горит зеленым

3. **Проверка работоспособности**
   - После активации Always On откройте страницу мониторинга вашего приложения
   - Убедитесь, что и веб-сервер, и Telegram бот отображаются как "Работает"
   - Теперь можно закрыть браузер - система продолжит работать

## Как работает новая система

Новая система Always On включает следующие улучшения:

1. **Надежное управление процессами**
   - Специальный контроллер отслеживает состояние всех процессов
   - Автоматический перезапуск компонентов при сбоях
   - Детальное логирование всех событий

2. **Повышенная стабильность**
   - Процессы запускаются с использованием отдельных групп процессов
   - Каждый компонент имеет собственный лог-файл для диагностики
   - Система защищена от различных сценариев сбоев

3. **Контроль состояния**
   - Регулярные проверки работоспособности всех компонентов
   - Система мониторинга ресурсов
   - Периодическая запись информации о состоянии в логи

## Диагностика проблем

Если после настройки Always On возникают проблемы:

1. **Проверка логов**
   - Зайдите на страницу мониторинга (/monitor)
   - Проверьте последние логи системы
   - Обратите внимание на ошибки в логах Telegram бота и веб-сервера

2. **Ручной перезапуск**
   - На странице мониторинга используйте кнопки перезапуска компонентов
   - После перезапуска проверьте, появились ли новые ошибки в логах

3. **Проверка настроек**
   - Убедитесь, что бот правильно настроен в базе данных (корректный токен)
   - Проверьте активность бота и источников новостей

## Примечания

- Always On требует наличия Premium подписки Replit или достаточного количества Cycles
- Даже с активированным Always On система мониторинга может иногда фиксировать кратковременные перезапуски сервисов - это нормальное поведение Replit
- Новая система ведет подробные логи, которые помогут в диагностике любых проблем