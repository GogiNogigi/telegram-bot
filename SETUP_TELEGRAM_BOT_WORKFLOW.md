# Настройка Workflow для Telegram бота

Чтобы Telegram бот работал в фоновом режиме в Replit, необходимо настроить отдельный workflow для него. Эта инструкция поможет вам сделать это.

## Шаг 1: Создание нового Workflow

1. Откройте проект в Replit
2. Нажмите на значок "⚙️" (Settings) в левой панели
3. В разделе "Workflows" нажмите кнопку "Create workflow"
4. Заполните форму:
   - **Name**: `Start Telegram Bot`
   - **Type**: Sequential (один процесс)
   - **Show run button**: Отметьте галочкой

## Шаг 2: Настройка команды запуска

1. В созданном workflow добавьте новую задачу типа "Shell command"
2. В поле команды введите: `python run_telegram_bot.py`
3. Сохраните workflow

## Шаг 3: Настройка основного Workflow (опционально)

1. В настройках можно настроить основной workflow, который будет запускать и веб-сервер, и Telegram бота:
   - **Name**: `Run Project`
   - **Type**: Parallel (параллельный запуск)
   - В этом workflow добавьте две задачи:
     - `workflow.run` с аргументом `Start application` (для запуска веб-сервера)
     - `workflow.run` с аргументом `Start Telegram Bot` (для запуска бота)

## Шаг 4: Запуск Telegram бота

1. После создания workflow, на панели Run появится кнопка "Start Telegram Bot"
2. Нажмите на эту кнопку, чтобы запустить бота отдельно
3. Telegram бот будет запущен и работать в фоновом режиме

## Важные замечания

- Если запущен Telegram бот в отдельном workflow, не нужно запускать файл `run_permanently.py` - это приведет к запуску дополнительной копии бота.
- Для проверки статуса бота, можно отправить команду `/start` в вашем Telegram боте.
- Логи бота будут доступны в панели консоли workflow "Start Telegram Bot".
- Если бот по какой-то причине перестал отвечать, перезапустите workflow.

## Рекомендации для Always-On

- Для постоянной работы бота рекомендуется настроить режим "Always On" в настройках проекта.
- В режиме "Always On" лучше использовать `run_permanently.py`, который автоматически следит за работой обоих сервисов и перезапускает их при необходимости.
- Инструкции по настройке "Always On" доступны в файле `SETUP_ALWAYS_ON.md`.